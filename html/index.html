<!DOCTYPE html> 
<!--https://www.webcodegeeks.com/html5/html5-file-upload-example/-->
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

	<style>
		body
		{
			overflow-x:hidden;overflow-y:hidden;font-family:"Lucida Sans Unicode", "Lucida Grande", "Arial", Helvetica, sans-serif; background-color:rgb(16,46,66); color:white; padding:0% 2.5%; height:100%;
			background-size: 60px 60px;
			background-image: linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
		}
	</style>
</head>
<body>
	<center>

	<br>DEMO ONLY - NOT FOR REAL USE<br>
	<input style="font-size:600%; margin-top:2em; padding:.5em; border-radius:20px" type="button" id="loadFileXml" value="üì∑" onclick="document.getElementById('fileinput').click();" />
	<input type="file" accept="image/*" style="display:none;" id="fileinput" name="fileinput" capture="environment"/>
	<br><br>
	<div id='txt'>
		<br>Press to take a photo
		<br>Appuyez pour prendre une photo
		<br>Druk om een foto te nemen
	</div>
	</center>
	<script src='params.js'></script>
	<script>
	var url 	= new URL(document.URL);
	var key 	= url.searchParams.get("key");
	var txt     = document.getElementById('txt')

	document.getElementById('fileinput').addEventListener('change', function()
	{
		var files = this.files;
		uploadFile(files[0], upload_path, key)
		txt.innerHTML = '<br>‚è≥ Your photo is being sent<br>‚è≥ Votre photo est en cours d\'envoi<br>‚è≥ Uw foto wordt gestuurd'
	}, false);

	function uploadFile(file, upload_path, key)
	{

		var upload_url = upload_path + '?key=' + key;
		var xhr = new XMLHttpRequest();
		var fd  = new FormData();

		xhr.open("POST", upload_url, true);
		xhr.onreadystatechange = function() 
		{
			if (xhr.readyState == 4 && xhr.status == 200)
			{
				// Every thing ok, file uploaded
				//alert(xhr.responseText); // handle response.
				txt.innerHTML = '<br>‚úì Your photo has been sent<br>‚úì Votre photo a √©t√© envoy√©e<br>‚úì Uw foto werd gestuurd'
				setTimeout(function(){location.reload()}, 1000)
				return;
			}
		};
		fd.append("upload_file", file);
	   	xhr.send(fd);
	}
	</script>
    </body>
</html>



